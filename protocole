
server response fail:
	opcode = OPC_ERROR
	len = 4
	data:
		reason (4 bytes)

server response success:
	opcode = OPC_SCCESS
	len = 4
	data:
		same opcode as the operation (4 bytes)

create account:
	send:
		opcode = OPC_CREATE_ACC
		len = name_len + 1 + 64
		data:
			name
			\0
			passwd_hash (64 bytes)
	response:
		fail/success

auth account:
	send:
		opcode = OPC_AUTH_ACC
		len = name_len + 1 + 64
		data:
			name
			\0
			passwd_hash (64 bytes)
	response:
		fail/success

ping:
	send:
		opcode = OPC_PING
		len = ignored
		data:
			ignored

	response:
		ocpode = OPC_PING
		len = ignored
		data:
			ignored

create room:
	send:
		opcode = OPC_CREATE_ROOM
		len = room_name_len + 1 + 64
		data:
			room_name
			\0
			room_passw_hash (64 bytes)
			room_type (1 byte)
	response:
		fail/success

join room:
	send:
		opcode = OPC_JOIN
		len = room_name_len + 1 + 64
		data:
			room_name
			\0
			room_passw_hash (64 bytes)
	response:
		fail/custom
		custom:
			opcode = OPC_SUCCESS
			len = 5
			data:
				OPC_JOIN
				room type (1 byte)
move:
	send:
		opcode = OPC_MOVE
		len = 16
		data:
			x1 (u32)
			y1 (u32)
			x2 (u32)
			y2 (u32)
	response:
		fail/success

custom opcode:
	send:
		opcode = OPC_CUSTOM
		len = 4 + custom_data_len
		data:
			custom_opcode (u32)
			custom_data

ask_board:
	send:
		opcode = OPC_ASK_BOARD
		len = 0
		data:
	
	response:
		fail/send_board

send_board:
	# from server
	opcode = send_board
	len = ...
	data:
		width (u8)
		height (u8)
		depth (u8) # usually 1
		pieces... (as u16 *)

		piece:
			u8: color
			u8: type

	

game_loop:
	0: 
	1: send(start)
	2: wait(recv(start) || recv(exit)) // exit == someone else has exited
	3: wait(recv(your_turn) || recv(exit))
	4: if (recv_exit)
		goto 2
	5: send(move) || send(custom)
	6: wait(recv(win) || recv(exit) || recv(your_turn) // exit == same
	7: if (recv_exit || recv_win)
		goto 0
	8: goto 5


